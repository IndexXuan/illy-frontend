<!-- 具体一个题目 -->
<div class="question" ms-controller="question">

    <!-- progress of question -->
    <div class="progress-wrapper">
        <div class="progress-outer">
            <div class="progress-inner" ms-css-width="( localAnswers.length * 100 ) / total + '%' "></div> 
        </div>
        <span class="progress-text">{{currentId}} / {{total}}</span>
    </div>
    <!-- progress of question -->

    <!--<ul class="yo-list yo-list-group">-->
    <!--    <li class="item yo-range yo-range-e">-->
    <!--        <input type="range" min="0" max="100" ms-attr-value="( (currentId - 1) * 100) / total">-->
    <!--        <span class="progress-text">{{currentId}} / {{total}}</span>-->
    <!--    </li>-->
    <!--</ul>-->

    <!-- 公用题干 -->
    <p class="question-text">
        题干:{{exercise.question}} <br/>  
        <span class="description" ms-if=" exercise.eType == 0 && !!exercise.description ">题目说明:{{exercise.description}}</span>
    </p>
    <!-- 公用题干 -->

    <!-- 题目主干渲染区, 依据不同类型 start -->

    <!-- 文字选择题-->
    <div class="yo-list yo-list-group" ms-if="exercise.eType == 0">
        <label class="item item-active" ms-repeat-item="exercise.choices">
            <span class="mark flex">
                {{item.title}}. {{item.content}} 
            </span>
            <div class="yo-checked yo-checked-c">
                <input type="radio" name="xiaoxuan" ms-attr-value="{{item.title}}" ms-duplex-string=" userAnswer " />
                <span class="type"></span>
            </div>
        </label>
    </div>
    <!-- 文字选择题-->

    <!-- 图片选择题-->
    <div class="yo-list yo-list-group illy-img-list" ms-if="exercise.eType == 1">
        <label class="item item-active" ms-repeat-item="exercise.choices">
            <span class="mark flex">
                <img ms-attr-src="'http://resource.hizouye.com/' + item.content" />
            </span>
            <div class="yo-checked yo-checked-c">
                <input type="radio" name="xiaoxuan" ms-attr-value="{{item.title}}" ms-duplex-string=" userAnswer " />
                <span class="type"></span>
            </div>
        </label>
    </div>
    <!-- 图片选择题-->

    <!-- 填空题 -->
    <div class="fill-in" ms-if="exercise.eType == 2">
        <textarea ms-duplex="userAnswer" ms-visible=" localAnswers[currentId - 1] == void 0 ">
            aaa 
        </textarea>
        <p ms-visible="localAnswers[currentId - 1]">您填写的答案为：{{localAnswers[currentId - 1]}}</p>
    </div>
    <!-- 填空题 -->

    <!-- 录音题,ui状态略混乱 -->
    <div class="mp3" ms-if="exercise.eType == 3">

        <!-- 仅录音时显示 -->
        <div class="record-mask mask" ms-class-1="show: isRecording==true"></div>

        <!-- 仅录音时显示 -->
        <div class="isRecording" ms-class-1="show: isRecording==true"></div>
        <div class="timeout-mask">10</div>

        <!-- 仅首次进入本题且未成功录制一次录音时显示-->
        <div id="startRecord" class="record-btn" ms-class="active:isRecording==true" ms-if="!showPlayRecordBtn" ms-on-touchstart="startRecord()" ms-on-touchend="stopRecord()" ms-on-touchcancel="stopRecord()" ms-on-touchleave="stopRecord()">开始录制</div>

        <!-- 后退的页面不应该显示重新录制 -->
        <div id="reStartRecord" class="record-btn" ms-class="active:isRecording==true" ms-if=" showPlayRecordBtn && (localAnswers.length < currentId) " ms-on-touchstart="startRecord()" ms-on-touchend="stopRecord()" ms-on-touchcancel="stopRecord()" ms-on-touchleave="stopRecord()">重新录制</div>

        <!-- 录音完毕或者后退到本题时显示 -->
        <div id="playRecord" class="playRecord record-btn" ms-class-1="hide: isRecording==true" ms-class-2="playing: isPlaying==true" ms-on-tap="togglePlayRecord()" ms-visible="showPlayRecordBtn && userAnswer != ''"><span class="record-total-time">{{duration}}</span><i class="second-symbol">&quot</i><span ms-visible="isPlaying!=true">点击试听</span><span ms-visible="isPlaying==true">点击停止</span></div>
        <div class="playRecord record-btn" ms-class-1="hide: isRecording==true" ms-visible="showPlayRecordBtn && userAnswer == ''"><span class="record-total-time">0</span><i class="second-symbol">&quot</i><span ms-visible="isPlaying!=true">未录制</span></div>

        <!-- 仅录音过短显示, 一定时间后消失或录音时消失 -->
        <div class="record-tips">录音时间过短，请重新录制</div>

    </div>
    <!-- 录音题-->

    <!-- 题目主干渲染区, 依据不同类型 end -->

    <!-- 检查按钮, 仅在没做过这题时渲染 -->
    <div ms-click="checkAnswer()" ms-if="localAnswers.length < currentId " class="tap-btn next" ms-class-1="hide: isRecording==true">
        <span class="icon yo-ico">&#xf078;</span>
    </div>
    <!-- 检查按钮 -->

    <!-- 答案和分析面板 -->
    <!-- 显示与否的罗辑， 1.先看是不是做过了这题，再看是不是点击了检查按钮! 2. 本地保存的题目数量大于或者等于当前题就说明做过了当前题 -->
    <div class="answer-panel" ms-class="wrong:right != true" ms-visible=" (localAnswers.length >= currentId)">
        <div class="answer" ms-if="exercise.eType != 3">
            <span class="right" ms-if="right">正确! </span>
            <span class="right" ms-if="!right">错误! </span>
            <p ms-if="exercise.analysis != ''">解析: {{exercise.analysis}}</p>
        </div>
        <div class="answer" ms-if="exercise.eType == 3">
            <span class="save">本题完毕， 请继续操作!</span>
        </div>
        <div class="tap-btn btn-next" ms-click="next()" ms-if="hasNext">
            <span class="icon yo-ico icon-next">&#xf079;</span>
        </div>
        <div class="tap-btn btn-submit" ms-click="submit()" ms-if="!hasNext">
            <span class="icon yo-ico">&#xf078;</span>
        </div>
    </div>
    <!-- 答案和分析面板 -->

</div>

