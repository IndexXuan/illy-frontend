define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,token=avalon.illyGlobal.token,resourcePrefix="http://resource.hizuoye.com/",defaultAvatarUrl="http://resource.hizuoye.com/images/avatar/children/default1.png?imageView2/1/w/200/h/200",slidersUrlPrefix="./assets/images",slidersData=[{image:slidersUrlPrefix+"/hw-list-slider1.png",title:"task",href:"./task.html"},{image:slidersUrlPrefix+"/hw-list-slider2.png",title:"mall",href:"./task.html#!/mall"},{image:slidersUrlPrefix+"/hw-list-slider1.png",title:"rank",href:"./task.html#!/rank"}],app=avalon.define({$id:"app",$skipArray:["illly_domain","illy_images_base"],illy_domain:avalon.illyGlobal.illyDomain,illy_images_base:avalon.illyGlobal.imagesBaseSrc,sliders:[],renderSlider:function(){setTimeout(function(){$("#slider").slider({loop:!0,ready:function(){setTimeout(function(){avalon.$("#slider").style.visibility="visible"},16)},"done.dom":function(){}})},32)},appMessage:"I am message from app ctrl",gMaskShow:!1,yesOrNo:null,gConfirmShow:!1,showConfirm:function(message){app.appMessage=message,app.gMaskShow=!0,app.gConfirmShow=!0},hideConfirm:function(){app.yesOrNo=null,app.gMaskShow=!1,app.gConfirmShow=!1},yesClick:function(){app.yesOrNo=!0,app.hideConfirm()},noClick:function(){app.yesOrNo=!1,app.hideConfirm()},gAlertShow:!1,showAlert:function(message,hideDelay){app.appMessage=message,app.gMaskShow=!0,app.gAlertShow=!0,void 0!==hideDelay&&setTimeout(function(){app.hideAlert()},1e3*hideDelay)},hideAlert:function(){app.gMaskShow=!1,app.gAlertShow=!1},iKnowClick:function(){app.hideAlert()},schoolName:"",studentCount:100,displayName:"",avatar:defaultAvatarUrl,getUserInfo:function(){$http.ajax({url:apiBaseUrl+"profile",headers:{Authorization:"Bearer "+token},dataType:"json",success:function(json){app.avatar=void 0!==json.avatar?resourcePrefix+json.avatar+"?imageView2/2/w/200/h/200":defaultAvatarUrl,app.displayName=json.displayName,app.score=json.score}})},getSchoolInfo:function(){$http.ajax({url:apiBaseUrl+"school",headers:{Authorization:"Bearer "+token},dataType:"json",success:function(json){app.schoolName=json.school,avalon.vmodels.root.footerInfo=json.school+" Â© "+(new Date).getFullYear(),app.studentCount=json.studentCount||100}})}});return avalon.vmodels.root.$watch("currentState",function(newState){"list"!==newState&&"mistakeList"!==newState?avalon.$("#slider").style.display="none":(avalon.vmodels.app.sliders=slidersData,avalon.$("#slider").style.display="")}),avalon.controller(function($ctrl){$ctrl.$onEnter=function(){app.getUserInfo()},$ctrl.$onRendered=function(){var renderedTime=Date.now();setTimeout(function(){avalon.illyInfo("avalon rendered totalTime: ",renderedTime-avalon.appInitTime)},888)},$ctrl.$onBeforeUnload=function(){avalon.clearLocalCache("illy-homework-")},$ctrl.$vmodels=[]})});
//# sourceMappingURL=app.js.map