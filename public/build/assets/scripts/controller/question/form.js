define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,token=avalon.illyGlobal.token,form=avalon.define({$id:"form",imgLocalId:"",imgServerId:"",questionText:"",createQuestion:function(){return form.questionText.length<=5?void avalon.vmodels.question.showAlert("请增加一些描述，以便老师解答!",3):void $http.ajax({method:"POST",url:apiBaseUrl+"questions",headers:{Authorization:"Bearer "+token},data:{questionImage:form.imgServerId,questionText:form.questionText},success:function(){avalon.router.go("question.result.list")},error:function(res){avalon.illyError("ajax error",res),alert("submit error!")},ajaxFail:function(res){avalon.illyError("ajax failed",res),alert("submit failed!")}})}});return avalon.controller(function($ctrl){$ctrl.$onEnter=function(){var index=avalon.vmodels.index;form.imgLocalId=index&&index.localImgSrc,form.imgServerId=index&&index.serverId},$ctrl.$onRendered=function(){},$ctrl.$onBeforeUnload=function(){},$ctrl.$vmodels=[]})});
//# sourceMappingURL=form.js.map