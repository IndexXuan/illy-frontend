define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,token=avalon.illyGlobal.token,localLimit=6,list=avalon.define({$id:"list",isVisited:!1,noContent:!1,noContentText:"还没有做过作业哦，<br/>快去完成作业，得到老师评价吧~",lists:[],isLoading:!1,offset:0,noMoreData:!1,btnShowMore:!1,fetchData:function(data,concat){list.isLoading=!0;var offset,limit=localLimit;offset=list.lists.length||0,$http.ajax({url:apiBaseUrl+"questions?state=0&limit="+limit+"&offset="+offset,data:data,headers:{Authorization:"Bearer "+token},dataType:"json",success:function(lists){list.lists=concat===!0?list.lists.concat(lists):lists,setTimeout(function(){var newLists=list.lists;newLists&&0===newLists.length&&(list.noContent=!0)},200),0===lists.length&&(list.noMoreData=!0),list.isLoading=!1},error:function(res){avalon.illyError("list ajax error",res),list.lists.length<=1&&(list.noContent=!0)},ajaxFail:function(res){avalon.illyError("list ajax failed"+res),list.lists.length<=1&&(list.noContent=!0)}})},showMore:function(e){e.preventDefault(),list.fetchData({},!0)}});return list.lists.$watch("length",function(newLength){list.btnShowMore=newLength&&localLimit>newLength?!1:!0}),avalon.controller(function($ctrl){$ctrl.$onBeforeUnload=function(){},$ctrl.$onEnter=function(){avalon.vmodels.result.current="list",list.isVisited=avalon.vmodels.root.currentIsVisited,list.isVisited||list.fetchData()},$ctrl.$onRendered=function(){},$ctrl.$vmodels=[]})});
//# sourceMappingURL=list.js.map