define([],function(){var apiBaseUrl=avalon.illyGlobal.apiBaseUrl,token=avalon.illyGlobal.token,defaultAvatarUrl="http://resource.hizuoye.com/images/avatar/children/default1.png?imageView2/1/w/200/h/200",task=avalon.define({$id:"task",score:88,schoolName:"",studentCount:100,displayName:"",avatar:defaultAvatarUrl,getUserInfo:function(){$http.ajax({url:apiBaseUrl+"profile",headers:{Authorization:"Bearer "+token},dataType:"json",success:function(json){task.avatar=void 0!==json.avatar?json.avatar:defaultAvatarUrl,task.displayName=json.displayName,task.score=json.score}})},getSchoolInfo:function(){$http.ajax({url:apiBaseUrl+"school",headers:{Authorization:"Bearer "+token},dataType:"json",success:function(json){task.schoolName=json.school,avalon.vmodels.root.footerInfo=json.school+" Â© "+(new Date).getFullYear(),task.studentCount=json.studentCount||100}})}});return avalon.controller(function($ctrl){$ctrl.$onRendered=function(){},$ctrl.$onEnter=function(){avalon.clearLocalCache("illy-task"),task.getUserInfo(),task.getSchoolInfo()},$ctrl.$onBeforeUnload=function(){},$ctrl.$vmodels=[]})});
//# sourceMappingURL=task.js.map