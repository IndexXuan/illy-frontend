var loadingBeginHandler=function(loader,callback){"function"==typeof loader&&(callback=loader,loader=void 0),loader=global_loader_dom||document.querySelector(global_loader_className);var showLoader=function(){loader&&(loader.style.display="")},always_show_loader=global_always_show_loader===!0?!0:!1;loader&&always_show_loader?showLoader():!loader||always_show_loader||root.currentIsVisited||showLoader(),callback&&"function"==typeof callback&&callback()},loadingEndHandler=function(loader,callback){"function"==typeof loader&&(callback=loader,loader=void 0),loader=global_loader_dom||document.querySelector(global_loader_className);var hideLoader=function(){loader&&(loader.style.display="none")};void 0===global_loading_delay&&(global_loading_delay=500,console.log("%cWARNING: no global_loading_delay set!","background-color: red; color: #fff")),setTimeout(function(){hideLoader(),callback&&"function"==typeof callback&&callback()},global_loading_delay)};root.$watch("currentAction",function(currentAction){"onBegin"===currentAction&&loadingBeginHandler(),"onLoad"===currentAction&&loadingEndHandler()});var bindBadNetworkHandler=function(timeout){timeout=global_loading_timeout||8e3;var loader=global_loader_dom||document.querySelector(global_loader_className);badNetworkTimer&&clearTimeout(badNetworkTimer);var badNetworkTimer=setTimeout(function(){alert("对不起，您的网络状态暂时不佳，请稍后重试！"),history.go(-1),loader&&(loader.style.display="none")},timeout);avalon.badNetworkTimer=badNetworkTimer,root.$watch("currentState",function(changeState){void 0!==changeState&&clearTimeout(badNetworkTimer)})},unbindBadNetworkHandler=function(timer){timer=timer||avalon.badNetworkTimer,timer&&clearTimeout(timer)};root.$watch("currentAction",function(currentAction){"onBegin"===currentAction&&bindBadNetworkHandler(),"onLoad"===currentAction&&unbindBadNetworkHandler()});var getCurrentState=function(){var state1=mmState.currentState.stateName.split(".")[1],state2=mmState.currentState.stateName.split(".")[2];return void 0===state2?state1:state2};root.$watch("currentAction",function(currentAction){"onLoad"===currentAction&&(root.currentState=getCurrentState())});var setPageTitle=function(titleMap){titleMap=titleMap||ACTIONBAR_TITLE_MAP;var currentState=root.currentState;root.title=titleMap[currentState]};root.$watch("currentAction",function(currentAction){"onLoad"===currentAction&&setPageTitle()});var doIsVisitedCheck=function(cacheContainer,callback){"function"==typeof cacheContainer&&(callback=cacheContainer,cacheContainer=void 0);var pageId=location.href.split("!")[1];cacheContainer=cacheContainer||CACHE_VISITED_PAGEID_CONTAINER,cacheContainer.push(pageId);for(var isVisited=!1,i=0,len=CACHE_VISITED_PAGEID_CONTAINER.length-1;len>i;i++)CACHE_VISITED_PAGEID_CONTAINER[i]===pageId&&(isVisited=!0);return callback&&"function"==typeof callback&&callback(),isVisited},CACHE_VISITED_PAGEID_CONTAINER=[];root.$watch("currentAction",function(currentAction){"onBegin"===currentAction&&(root.currentIsVisited=doIsVisitedCheck())});var resetScrollbarWhenViewLoaded=function(){document.body.scrollTop=0,document.documentElement.scrollTop=0};global_always_reset_scrollbar===!0&&root.$watch("currentAction",function(currentAction){"onLoad"===currentAction&&resetScrollbarWhenViewLoaded()});
//# sourceMappingURL=globalComponents.js.map