/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
!function(window,doc){function prefixStyle(style){return""===vendor?style:(style=style.charAt(0).toUpperCase()+style.substr(1),vendor+style)}var m=Math,_bindArr=[],dummyStyle=doc.createElement("div").style,vendor=function(){for(var t,vendors="webkitT,MozT,msT,OT,t".split(","),i=0,l=vendors.length;l>i;i++)if(t=vendors[i]+"ransform",t in dummyStyle)return vendors[i].substr(0,vendors[i].length-1);return!1}(),cssVendor=vendor?"-"+vendor.toLowerCase()+"-":"",transform=prefixStyle("transform"),transitionProperty=prefixStyle("transitionProperty"),transitionDuration=prefixStyle("transitionDuration"),transformOrigin=prefixStyle("transformOrigin"),transitionTimingFunction=prefixStyle("transitionTimingFunction"),isAndroid=(prefixStyle("transitionDelay"),/android/gi.test(navigator.appVersion)),isTouchPad=/hp-tablet/gi.test(navigator.appVersion),has3d=prefixStyle("perspective")in dummyStyle,hasTouch="ontouchstart"in window&&!isTouchPad,hasTransform=!!vendor,hasTransitionEnd=prefixStyle("transition")in dummyStyle,RESIZE_EV="onorientationchange"in window?"orientationchange":"resize",START_EV=hasTouch?"touchstart":"mousedown",MOVE_EV=hasTouch?"touchmove":"mousemove",END_EV=hasTouch?"touchend":"mouseup",CANCEL_EV=hasTouch?"touchcancel":"mouseup",TRNEND_EV=function(){if(vendor===!1)return!1;var transitionEnd={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return transitionEnd[vendor]}(),nextFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1)}}(),cancelFrame=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),translateZ=has3d?" translateZ(0)":"",iScroll=function(el,options){var i,that=this;that.wrapper="object"==typeof el?el:doc.getElementById(el),that.wrapper.style.overflow="hidden",that.scroller=that.wrapper.children[0],that.translateZ=translateZ,that.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(i in options)that.options[i]=options[i];that.x=that.options.x,that.y=that.options.y,that.options.useTransform=hasTransform&&that.options.useTransform,that.options.useTransition=hasTransitionEnd&&that.options.useTransition,that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+"transform":"top left",that.scroller.style[transitionDuration]="0",that.scroller.style[transformOrigin]="0 0",that.options.useTransition&&(that.scroller.style[transitionTimingFunction]="cubic-bezier(0.33,0.66,0.66,1)"),that.options.useTransform?that.scroller.style[transform]="translate("+that.x+"px,"+that.y+"px)"+translateZ:that.scroller.style.cssText+=";position:absolute;top:"+that.y+"px;left:"+that.x+"px",that.refresh(),that._bind(RESIZE_EV,window),that._bind(START_EV),that.options.checkDOMChanges&&(that.checkDOMTime=setInterval(function(){that._checkDOMChanges()},500))};iScroll.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:!1,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&0!==e.button)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case TRNEND_EV:that._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_resize:function(){var that=this;setTimeout(function(){that.refresh()},isAndroid?200:0)},_pos:function(x,y){x=this.hScroll?x:0,y=this.vScroll?y:0,this.options.useTransform?this.scroller.style[transform]="translate("+x+"px,"+y+"px) scale("+this.scale+")"+translateZ:(x=m.round(x),y=m.round(y),this.scroller.style.left=x+"px",this.scroller.style.top=y+"px"),this.x=x,this.y=y},_start:function(e){var matrix,x,y,that=this,point=hasTouch?e.touches[0]:e;that.enabled&&(that.options.onBeforeScrollStart&&that.options.onBeforeScrollStart.call(that,e),that.options.useTransition&&that._transitionTime(0),that.moved=!1,that.animating=!1,that.distX=0,that.distY=0,that.absDistX=0,that.absDistY=0,that.dirX=0,that.dirY=0,that.isStopScrollAction=!1,that.options.momentum&&(that.options.useTransform?(matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,"").split(","),x=+matrix[4],y=+matrix[5]):(x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,""),y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,"")),(m.round(x)!=m.round(that.x)||m.round(y)!=m.round(that.y))&&(that.isStopScrollAction=!0,that.options.useTransition?that._unbind(TRNEND_EV):cancelFrame(that.aniTime),that.steps=[],that._pos(x,y),that.options.onScrollEnd&&that.options.onScrollEnd.call(that))),that.startX=that.x,that.startY=that.y,that.pointX=point.pageX,that.pointY=point.pageY,that.startTime=e.timeStamp||Date.now(),that.options.onScrollStart&&that.options.onScrollStart.call(that,e),that._bind(MOVE_EV,window),that._bind(END_EV,window),that._bind(CANCEL_EV,window))},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,timestamp=e.timeStamp||Date.now();that.options.onBeforeScrollMove&&that.options.onBeforeScrollMove.call(that,e),that.pointX=point.pageX,that.pointY=point.pageY,(newX>0||newX<that.maxScrollX)&&(newX=that.options.bounce?that.x+deltaX/2:newX>=0||that.maxScrollX>=0?0:that.maxScrollX),(newY>that.minScrollY||newY<that.maxScrollY)&&(newY=that.options.bounce?that.y+deltaY/2:newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY),that.distX+=deltaX,that.distY+=deltaY,that.absDistX=m.abs(that.distX),that.absDistY=m.abs(that.distY),that.absDistX<6&&that.absDistY<6||(that.options.lockDirection&&(that.absDistX>that.absDistY+5?(newY=that.y,deltaY=0):that.absDistY>that.absDistX+5&&(newX=that.x,deltaX=0)),that.moved=!0,that._beforePos?that._beforePos(newY,deltaY)&&that._pos(newX,newY):that._pos(newX,newY),that.dirX=deltaX>0?-1:0>deltaX?1:0,that.dirY=deltaY>0?-1:0>deltaY?1:0,timestamp-that.startTime>300&&(that.startTime=timestamp,that.startX=that.x,that.startY=that.y),that.options.onScrollMove&&that.options.onScrollMove.call(that,e))},_end:function(e){if(!hasTouch||0===e.touches.length){var target,ev,newDuration,that=this,point=hasTouch?e.changedTouches[0]:e,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y;if(that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.onBeforeScrollEnd&&that.options.onBeforeScrollEnd.call(that,e),!that.moved)return hasTouch&&this.options.handleClick&&!that.isStopScrollAction&&(that.doubleTapTimer=setTimeout(function(){for(that.doubleTapTimer=null,target=point.target;1!=target.nodeType;)target=target.parentNode;"SELECT"!=target.tagName&&"INPUT"!=target.tagName&&"TEXTAREA"!=target.tagName&&(ev=doc.createEvent("MouseEvents"),ev.initMouseEvent("click",!0,!0,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),ev._fake=!0,target.dispatchEvent(ev))},0)),that._resetPos(400),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));if(300>duration&&that.options.momentum&&(momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX,momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0,that.options.bounce?that.wrapperH:0):momentumY,newPosX=that.x+momentumX.dist,newPosY=that.y+momentumY.dist,(that.x>0&&newPosX>0||that.x<that.maxScrollX&&newPosX<that.maxScrollX)&&(momentumX={dist:0,time:0}),(that.y>that.minScrollY&&newPosY>that.minScrollY||that.y<that.maxScrollY&&newPosY<that.maxScrollY)&&(momentumY={dist:0,time:0})),momentumX.dist||momentumY.dist)return newDuration=m.max(m.max(momentumX.time,momentumY.time),10),that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration),void(that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e));that._resetPos(200),that.options.onTouchEnd&&that.options.onTouchEnd.call(that,e)}},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;return resetX==that.x&&resetY==that.y?void(that.moved&&(that.moved=!1,that.options.onScrollEnd&&that.options.onScrollEnd.call(that),that._afterPos&&that._afterPos())):void that.scrollTo(resetX,resetY,time||0)},_transitionEnd:function(e){var that=this;e.target==that.scroller&&(that._unbind(TRNEND_EV),that._startAni())},_startAni:function(){var step,easeOut,animate,that=this,startX=that.x,startY=that.y,startTime=Date.now();if(!that.animating){if(!that.steps.length)return void that._resetPos(400);if(step=that.steps.shift(),step.x==startX&&step.y==startY&&(step.time=0),that.animating=!0,that.moved=!0,that.options.useTransition)return that._transitionTime(step.time),that._pos(step.x,step.y),that.animating=!1,void(step.time?that._bind(TRNEND_EV):that._resetPos(0));animate=function(){var newX,newY,now=Date.now();return now>=startTime+step.time?(that._pos(step.x,step.y),that.animating=!1,that.options.onAnimationEnd&&that.options.onAnimationEnd.call(that),void that._startAni()):(now=(now-startTime)/step.time-1,easeOut=m.sqrt(1-now*now),newX=(step.x-startX)*easeOut+startX,newY=(step.y-startY)*easeOut+startY,that._pos(newX,newY),void(that.animating&&(that.aniTime=nextFrame(animate))))},animate()}},_transitionTime:function(time){time+="ms",this.scroller.style[transitionDuration]=time},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=6e-4,speed=m.abs(dist)*(this.options.speedScale||1)/time,newDist=speed*speed/(2*deceleration),newTime=0,outsideDist=0;return dist>0&&newDist>maxDistUpper?(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistUpper+=outsideDist,speed=speed*maxDistUpper/newDist,newDist=maxDistUpper):0>dist&&newDist>maxDistLower&&(outsideDist=size/(6/(newDist/speed*deceleration)),maxDistLower+=outsideDist,speed=speed*maxDistLower/newDist,newDist=maxDistLower),newDist*=0>dist?-1:1,newTime=speed/deceleration,{dist:newDist,time:m.round(newTime)}},_offset:function(el){for(var left=-el.offsetLeft,top=-el.offsetTop;el=el.offsetParent;)left-=el.offsetLeft,top-=el.offsetTop;return el!=this.wrapper&&(left*=this.scale,top*=this.scale),{left:left,top:top}},_bind:function(type,el,bubble){_bindArr.concat([el||this.scroller,type,this]),(el||this.scroller).addEventListener(type,this,!!bubble)},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble)},destroy:function(){var that=this;that.scroller.style[transform]="",that._unbind(RESIZE_EV,window),that._unbind(START_EV),that._unbind(MOVE_EV,window),that._unbind(END_EV,window),that._unbind(CANCEL_EV,window),that.options.useTransition&&that._unbind(TRNEND_EV),that.options.checkDOMChanges&&clearInterval(that.checkDOMTime),that.options.onDestroy&&that.options.onDestroy.call(that);for(var i=0,l=_bindArr.length;l>i;)_bindArr[i].removeEventListener(_bindArr[i+1],_bindArr[i+2]),_bindArr[i]=null,i+=3;_bindArr=[]},refresh:function(){var offset,that=this;that.wrapperW=that.wrapper.clientWidth||1,that.wrapperH=that.wrapper.clientHeight||1,that.minScrollY=-that.options.topOffset||0,that.scrollerW=m.round(that.scroller.offsetWidth*that.scale),that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale),that.maxScrollX=that.wrapperW-that.scrollerW,that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY,that.dirX=0,that.dirY=0,that.options.onRefresh&&that.options.onRefresh.call(that),that.hScroll=that.options.hScroll&&that.maxScrollX<0,that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH),offset=that._offset(that.wrapper),that.wrapperOffsetLeft=-offset.left,that.wrapperOffsetTop=-offset.top,that.scroller.style[transitionDuration]="0",that._resetPos(400)},scrollTo:function(x,y,time,relative){var i,l,that=this,step=x;for(that.stop(),step.length||(step=[{x:x,y:y,time:time,relative:relative}]),i=0,l=step.length;l>i;i++)step[i].relative&&(step[i].x=that.x-step[i].x,step[i].y=that.y-step[i].y),that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});that._startAni()},scrollToElement:function(el,time){var pos,that=this;el=el.nodeType?el:that.scroller.querySelector(el),el&&(pos=that._offset(el),pos.left+=that.wrapperOffsetLeft,pos.top+=that.wrapperOffsetTop,pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left,pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top,time=void 0===time?m.max(2*m.abs(pos.left),2*m.abs(pos.top)):time,that.scrollTo(pos.left,pos.top,time))},scrollToPage:function(pageX,pageY,time){var x,y,that=this;time=void 0===time?400:time,that.options.onScrollStart&&that.options.onScrollStart.call(that),x=-that.wrapperW*pageX,y=-that.wrapperH*pageY,x<that.maxScrollX&&(x=that.maxScrollX),y<that.maxScrollY&&(y=that.maxScrollY),that.scrollTo(x,y,time)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(MOVE_EV,window),this._unbind(END_EV,window),this._unbind(CANCEL_EV,window)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(TRNEND_EV):cancelFrame(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},isReady:function(){return!this.moved&&!this.animating}},dummyStyle=null,"undefined"!=typeof exports?exports.iScroll=iScroll:window.iScroll=iScroll,function($,ns,undefined){if($){var iScroll,_iScroll=ns.iScroll,slice=[].slice,record=function(){var data={},id=0,ikey="_sid";return function(obj,val){var key=obj[ikey]||(obj[ikey]=++id);return val!==undefined&&(data[key]=val),null===val&&delete data[key],data[key]}}();ns.iScroll=iScroll=function(el,options){var ins=([].slice.call(arguments,0),new _iScroll(el,options));return record(el,ins),ins},iScroll.prototype=_iScroll.prototype,$.fn.iScroll=function(opts){var ret,obj,args=slice.call(arguments,1),method="string"==typeof opts&&opts;return $.each(this,function(i,el){if(obj=record(el)||iScroll(el,$.isPlainObject(opts)?opts:undefined),"this"===method)return ret=obj,!1;if(method){if(!$.isFunction(obj[method]))throw new Error("iScroll没有此方法："+method);if(ret=obj[method].apply(obj,args),ret!==undefined&&ret!==obj)return!1;ret=undefined}}),ret!==undefined?ret:this}}}(window.Zepto||null,window)}(window,document);
//# sourceMappingURL=iscroll.js.map