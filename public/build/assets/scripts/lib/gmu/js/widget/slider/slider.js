!function(gmu,$){var cssPrefix=$.fx.cssPrefix,transitionEnd=$.fx.transitionEnd,translateZ=" translateZ(0)";gmu.define("Slider",{options:{loop:!1,speed:400,index:0,selector:{container:".ui-slider-group"}},template:{item:'<div class="ui-slider-item"><a href="<%= href %>"><img src="<%= pic %>" alt="" /></a><% if( title ) { %><p><%= title %></p><% } %></div>'},_create:function(){var me=this,$el=me.getEl(),opts=me._options;me.index=opts.index,me._initDom($el,opts),me._initWidth($el,me.index),me._container.on(transitionEnd+me.eventNs,$.proxy(me._tansitionEnd,me)),$(window).on("ortchange"+me.eventNs,function(){me._initWidth($el,me.index)})},_initDom:function($el,opts){var items,container,selector=opts.selector,viewNum=opts.viewNum||1;for(container=$el.find(selector.container),container.length||(container=$("<div></div>"),opts.content?this._createItems(container,opts.content):$el.is("ul")?(this.$el=container.insertAfter($el),container=$el,$el=this.$el):container.append($el.children()),container.appendTo($el)),(items=container.children()).length<viewNum+1&&(opts.loop=!1);opts.loop&&container.children().length<3*viewNum;)container.append(items.clone());this.length=container.children().length,this._items=(this._container=container).addClass("ui-slider-group").children().addClass("ui-slider-item").toArray(),this.trigger("done.dom",$el.addClass("ui-slider"),opts)},_createItems:function(container,items){for(var i=0,len=items.length;len>i;i++)container.append(this.tpl2html("item",items[i]))},_initWidth:function($el,index,force){var width,me=this;(force||(width=$el.width())!==me.width)&&(me.width=width,me._arrange(width,index),me.height=$el.height(),me.trigger("width.change"))},_arrange:function(width,index){var item,len,items=this._items,i=0;for(this._slidePos=new Array(items.length),len=items.length;len>i;i++)item=items[i],item.style.cssText+="width:"+width+"px;left:"+i*-width+"px;",item.setAttribute("data-index",i),this._move(i,index>i?-width:i>index?width:0,0);this._container.css("width",width*len)},_move:function(index,dist,speed,immediate){var slidePos=this._slidePos,items=this._items;slidePos[index]!==dist&&items[index]&&(this._translate(index,dist,speed),slidePos[index]=dist,immediate&&items[index].clientLeft)},_translate:function(index,dist,speed){var slide=this._items[index],style=slide&&slide.style;return style?void(style.cssText+=cssPrefix+"transition-duration:"+speed+"ms;"+cssPrefix+"transform: translate("+dist+"px, 0)"+translateZ+";"):!1},_circle:function(index,arr){var len;return arr=arr||this._items,len=arr.length,(index%len+len)%arr.length},_tansitionEnd:function(e){~~e.target.getAttribute("data-index")===this.index&&this.trigger("slideend",this.index)},_slide:function(from,diff,dir,width,speed,opts){var to,me=this;return to=me._circle(from-dir*diff),opts.loop||(dir=Math.abs(from-to)/(from-to)),this._move(to,-dir*width,0,!0),this._move(from,width*dir,speed),this._move(to,0,speed),this.index=to,this.trigger("slide",to,from)},slideTo:function(to,speed){if(this.index===to||this.index===this._circle(to))return this;var opts=this._options,index=this.index,diff=Math.abs(index-to),dir=diff/(index-to),width=this.width;return speed=speed||opts.speed,this._slide(index,diff,dir,width,speed,opts)},prev:function(){return(this._options.loop||this.index>0)&&this.slideTo(this.index-1),this},next:function(){return(this._options.loop||this.index+1<this.length)&&this.slideTo(this.index+1),this},getIndex:function(){return this.index},destroy:function(){return this._container.off(this.eventNs),$(window).off("ortchange"+this.eventNs),this.$super("destroy")}})}(gmu,gmu.$);
//# sourceMappingURL=slider.js.map