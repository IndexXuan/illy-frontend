!function(gmu,$){gmu.define("Toolbar",{options:{container:document.body,title:"标题",leftBtns:[],rightBtns:[],fixed:!1},_init:function(){var $el,me=this,opts=me._options;opts.container||(opts.container=document.body),me.on("ready",function(){if($el=me.$el,opts.fixed){var offHandle,placeholder=$('<div class="ui-toolbar-placeholder"></div>').height($el.offset().height).insertBefore($el).append($el).append($el.clone().css({"z-index":1,position:"absolute",top:0})),top=$el.offset().top,check=function(){document.body.scrollTop>top?$el.css({position:"fixed",top:0}):$el.css("position","absolute")};$(window).on("touchmove touchend touchcancel scroll scrollStop",check),$(document).on("touchend touchcancel",offHandle=function(){setTimeout(function(){check()},200)}),me.on("destroy",function(){$(window).off("touchmove touchend touchcancel scroll scrollStop",check),$(document).off("touchend touchcancel",offHandle),$el.insertBefore(placeholder),placeholder.remove(),me._removeDom()}),check()}}),me.on("destroy",function(){me._removeDom()})},_create:function(){var me=this,opts=me._options,$el=me.getEl(),container=$(opts.container),children=[],btnGroups=me.btnGroups={left:[],right:[]},currentGroup=btnGroups.left;opts.setup||($el&&$el.length>0?$el.appendTo(container):$el=me.$el=$("<div>").appendTo(container)),children=$el.children(),$toolbarWrap=$el.find(".ui-toolbar-wrap"),0===$toolbarWrap.length?$toolbarWrap=$('<div class="ui-toolbar-wrap"></div>').appendTo($el):children=$toolbarWrap.children(),children.forEach(function(child){$toolbarWrap.append(child),/^[hH]/.test(child.tagName)?(currentGroup=btnGroups.right,me.title=child):currentGroup.push(child)});var leftBtnContainer=$toolbarWrap.find(".ui-toolbar-left"),rightBtnContainer=$toolbarWrap.find(".ui-toolbar-right");0===leftBtnContainer.length&&(leftBtnContainer=children.length?$('<div class="ui-toolbar-left">').insertBefore(children[0]):$('<div class="ui-toolbar-left">').appendTo($toolbarWrap),btnGroups.left.forEach(function(btn){$(btn).addClass("ui-toolbar-button"),leftBtnContainer.append(btn)}),rightBtnContainer=$('<div class="ui-toolbar-right">').appendTo($toolbarWrap),btnGroups.right.forEach(function(btn){$(btn).addClass("ui-toolbar-button"),rightBtnContainer.append(btn)})),$el.addClass("ui-toolbar"),$(me.title).length?$(me.title).addClass("ui-toolbar-title"):$('<h1 class="ui-toolbar-title">'+opts.title+"</h1>").insertAfter(leftBtnContainer),me.btnContainer={left:leftBtnContainer,right:rightBtnContainer},me.addBtns("left",opts.leftBtns),me.addBtns("right",opts.rightBtns)},_addBtn:function(container,btn){$(btn).appendTo(container).addClass("ui-toolbar-button")},addBtns:function(position,btns){var me=this,btnContainer=me.btnContainer[position],toString=Object.prototype.toString;return"[object String]"!=toString.call(position)&&(btns=position,btnContainer=me.btnContainer.right),btns.forEach(function(btn){btn instanceof gmu.Base&&(btn=btn.getEl()),me._addBtn(btnContainer,btn)}),me},show:function(){var me=this;return me.$el.show(),me.trigger("show"),me.isShowing=!0,me},hide:function(){var me=this;return me.$el.hide(),me.trigger("hide"),me.isShowing=!1,me},toggle:function(){var me=this;return me.isShowing===!1?me.show():me.hide(),me},_removeDom:function(){var me=this,$el=me.$el;me._options.setup===!1?$el.remove():$el.css("position","static").css("top","auto")}})}(gmu,gmu.$);
//# sourceMappingURL=toolbar.js.map