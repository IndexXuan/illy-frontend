!function(gmu,$){function eachEvent(events,callback,iterator){(events||"").split(separator).forEach(function(type){iterator(type,callback)})}function matcherFor(ns){return new RegExp("(?:^| )"+ns.replace(" "," .* ?")+"(?: |$)")}function parse(name){var parts=(""+name).split(".");return{e:parts[0],ns:parts.slice(1).sort().join(" ")}}function findHandlers(arr,name,callback,context){var matcher,obj;return obj=parse(name),obj.ns&&(matcher=matcherFor(obj.ns)),arr.filter(function(handler){return!(!handler||obj.e&&handler.e!==obj.e||obj.ns&&!matcher.test(handler.ns)||callback&&handler.cb!==callback&&handler.cb._cb!==callback||context&&handler.ctx!==context)})}function Event(type,props){return this instanceof Event?(props&&$.extend(this,props),this.type=type,this):new Event(type,props)}var slice=[].slice,separator=/\s+/,returnFalse=function(){return!1},returnTrue=function(){return!0};Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,preventDefault:function(){this.isDefaultPrevented=returnTrue},stopPropagation:function(){this.isPropagationStopped=returnTrue}},gmu.event={on:function(name,callback,context){var set,me=this;return callback?(set=this._events||(this._events=[]),eachEvent(name,callback,function(name,callback){var handler=parse(name);handler.cb=callback,handler.ctx=context,handler.ctx2=context||me,handler.id=set.length,set.push(handler)}),this):this},one:function(name,callback,context){var me=this;return callback?(eachEvent(name,callback,function(name,callback){var once=function(){return me.off(name,once),callback.apply(context||me,arguments)};once._cb=callback,me.on(name,once,context)}),this):this},off:function(name,callback,context){var events=this._events;return events?name||callback||context?(eachEvent(name,callback,function(name,callback){findHandlers(events,name,callback,context).forEach(function(handler){delete events[handler.id]})}),this):(this._events=[],this):this},trigger:function(evt){var args,events,stoped,len,ev,i=-1;if(!this._events||!evt)return this;if("string"==typeof evt&&(evt=new Event(evt)),args=slice.call(arguments,1),evt.args=args,args.unshift(evt),events=findHandlers(this._events,evt.type))for(len=events.length;++i<len;)if((stoped=evt.isPropagationStopped())||!1===(ev=events[i]).cb.apply(ev.ctx2,args)){stoped||(evt.stopPropagation(),evt.preventDefault());break}return this}},gmu.Event=Event}(gmu,gmu.$);
//# sourceMappingURL=event.js.map