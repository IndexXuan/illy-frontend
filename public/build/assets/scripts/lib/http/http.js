!function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("$http requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function noop(){}function isEmptyObject(obj){for(var name in obj)if(obj.hasOwnProperty(name))return!1;return!0}function jsonToquerystring(data){for(var querystring="",keys=Object.keys(data),str="",i=0,len=keys.length;len>i;i++){var key=keys[i];str+=keys[i]+"="+data[key]+"&"}return querystring=str.substring(0,str.length-1)}function parseUrl(url,data){var hasQueryString=url.indexOf("?")>=0;return url+=hasQueryString?isEmptyObject(data)?"&cache="+Date.now():"&"+jsonToquerystring(data)+"&cache="+Date.now():isEmptyObject(data)?"?cache="+Date.now():"?"+jsonToquerystring(data)+"&cache="+Date.now()}function parseJSON(str){try{return JSON.parse(str+"")}catch(e){return console.log("JSON PARSE ERROR! "+str),str}}function setHeaders(xhr,headers){if(!isEmptyObject(headers))for(var keys=Object.keys(headers),x=0,len=keys.length;len>x;x++){var key=keys[x],val=headers[key];xhr.setRequestHeader(keys[x],val)}}var getXHR=function(){var xhr=new XMLHttpRequest;return xhr},request=function(method,url,data,beforeSend,headers,success,error,ajaxFail){var xhr=getXHR();method=method.toUpperCase(),data=data||{},beforeSend=beforeSend||noop,headers=headers||{},success=success||noop,error=error||noop,ajaxFail=ajaxFail||noop,xhr.open(method,"GET"===method?parseUrl(url,data):url,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?success(parseJSON(xhr.responseText)):error(parseJSON(xhr.responseText)))},beforeSend(xhr),xhr.setRequestHeader("Content-Type","application/json"),setHeaders(xhr,headers),xhr.send("GET"!==method?JSON.stringify(data):null),xhr.onerror=function(){ajaxFail(xhr.response)}},$http={get:function(settings){request("GET",settings.url,settings.data,settings.beforeSend,settings.headers,settings.success,settings.error,settings.ajaxFail)},post:function(settings){request("POST",settings.url,settings.data,settings.beforeSend,settings.headers,settings.success,settings.error,settings.ajaxFail)},ajax:function(settings){request(settings.method||"GET",settings.url,settings.data,settings.beforeSend,settings.headers,settings.success,settings.error,settings.ajaxFail)}};"function"==typeof define&&define.amd&&define("$http",[],function(){return $http});var _http=window.$http;return $http.noConflict=function(deep){return deep&&window.$http===$http&&(window.$http=_http),$http},void 0===noGlobal&&(window.$http=$http),$http});
//# sourceMappingURL=http.js.map